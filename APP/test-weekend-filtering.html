<!DOCTYPE html>
<html>
<head>
    <title>Test Weekend Filtering</title>
</head>
<body>
    <h1>Ethiopian Calendar Weekend Filtering Test</h1>
    <div id="output"></div>

    <script>
        // Ethiopian to Gregorian conversion (same as in utils)
        function ethiopianToGregorian(ethYear, ethMonth, ethDay) {
            let gregYear = ethYear + 8;
            let gregMonth, gregDay;
            
            if (ethMonth >= 1 && ethMonth <= 4) {
                gregMonth = ethMonth + 8;
                gregDay = ethDay + 10;
                
                if (gregDay > 30) {
                    gregDay -= 30;
                    gregMonth += 1;
                }
            } else if (ethMonth >= 5 && ethMonth <= 12) {
                gregMonth = ethMonth - 4;
                gregDay = ethDay + 7;
                
                const daysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
                if (gregDay > daysInMonth[gregMonth - 1]) {
                    gregDay -= daysInMonth[gregMonth - 1];
                    gregMonth += 1;
                }
            } else {
                gregMonth = 9;
                gregDay = ethDay - 25;
                if (gregDay <= 0) {
                    gregMonth = 8;
                    gregDay += 31;
                }
            }
            
            return new Date(gregYear, gregMonth - 1, gregDay);
        }

        // Test for Yekatit 2018 (Month 6)
        const ethYear = 2018;
        const ethMonth = 6; // Yekatit
        const weekendDays = [0, 6]; // Sunday and Saturday
        const dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];

        let output = '<h2>Yekatit 2018 (Month 6) - Day Analysis</h2>';
        output += '<table border="1" cellpadding="5">';
        output += '<tr><th>Eth Day</th><th>Gregorian Date</th><th>Day of Week</th><th>Is Weekend?</th><th>Show in Calendar?</th></tr>';

        const weekdays = [];
        const weekends = [];

        for (let day = 1; day <= 30; day++) {
            const gregDate = ethiopianToGregorian(ethYear, ethMonth, day);
            const dayOfWeek = gregDate.getDay();
            const isWeekend = weekendDays.includes(dayOfWeek);
            const showInCalendar = !isWeekend;

            if (isWeekend) {
                weekends.push(day);
            } else {
                weekdays.push(day);
            }

            const rowColor = isWeekend ? '#ffcccc' : '#ccffcc';
            output += `<tr style="background: ${rowColor}">`;
            output += `<td>${day}/6/2018</td>`;
            output += `<td>${gregDate.toDateString()}</td>`;
            output += `<td>${dayNames[dayOfWeek]}</td>`;
            output += `<td>${isWeekend ? 'üèñÔ∏è YES' : 'NO'}</td>`;
            output += `<td>${showInCalendar ? '‚úÖ YES' : '‚ùå NO (HIDE)'}</td>`;
            output += '</tr>';
        }

        output += '</table>';

        output += '<h3>Summary</h3>';
        output += `<p><strong>Total Days:</strong> 30</p>`;
        output += `<p><strong>Weekdays (show):</strong> ${weekdays.length} days - ${weekdays.join(', ')}</p>`;
        output += `<p><strong>Weekends (hide):</strong> ${weekends.length} days - ${weekends.join(', ')}</p>`;

        output += '<h3>Expected Result</h3>';
        output += '<p>The attendance calendar should show <strong>only these columns:</strong></p>';
        output += `<p style="background: #e3f2fd; padding: 10px; border-radius: 5px;">${weekdays.map(d => `${d}/6`).join(', ')}</p>`;

        document.getElementById('output').innerHTML = output;
    </script>
</body>
</html>
